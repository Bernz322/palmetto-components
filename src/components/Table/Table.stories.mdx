import { useState } from 'react';
import { action } from '@storybook/addon-actions';
import { withA11y } from '@storybook/addon-a11y';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import Table from './Table';


<Meta
  title="Components/Table"
  component={Table}
  decorators={[withA11y]}
/>

# Table

I'm a table!

## Props

<Props of={Table} />

## Sortable

<Preview>
  <Story name="Sortable">
    {() => {
      const [sortedColumn, setSortedColumn] = useState(sortedColumn);
      const columnConfig = [
        {name: 'First Column', apiKey: 'first', isSortable: true},
        {name: 'Second Column', apiKey: 'second'},
        {name: 'Third Column', apiKey: 'third'},
      ];
      const tableDataAsc = [
        ['1', 'foo', 'vanilla'],
        ['2', 'bar', 'chocolate'],
        ['3', 'bazz', 'strawberry'],
      ];
      const tableDataDesc = [
        ['3', 'bazz', 'strawberry'],
        ['2', 'bar', 'chocolate'],
        ['1', 'foo', 'vanilla'],
      ];
      const handleTableHeaderClick = clickedColumnName => {
        let direction;
        if (!sortedColumn || clickedColumnName !== sortedColumn.columnName) {
          direction = 'desc';
        } else {
          direction = (sortedColumn.sortOrder === 'desc') ? 'asc' : 'desc';
        }
        const newSortedColumn = {
          columnName: clickedColumnName,
          sortOrder: direction,
        };
        setSortedColumn(newSortedColumn);
      };
      return (
        <Table
          isBordered
          isResponsive
          columnConfig={columnConfig}
          tableData={sortedColumn && sortedColumn.sortOrder === 'desc' ? tableDataDesc : tableDataAsc}
          onSort={handleTableHeaderClick}
          sortedColumn={sortedColumn}
        />
      );
    }}
  </Story>
</Preview>

## Default

<Preview>
  <Story name="Default">
    {() => {
      const columnConfig = [
        {name: 'First Column'},
        {name: 'Second Column'},
        {name: 'Third Column'},
        {name: 'Fourth Column'},
        {name: 'Fifth Column'},
        {name: 'Sixth Column'},
        {name: 'Seventh Column'},
        {name: 'Eighth Column'},
        {name: 'Nineth Column'},
        {name: 'Tenth Column'},
        {name: 'Eleventh Column'},
        {name: 'Twelfth Column'},
      ];
      const tableData = [
        ['1', 'foo', 'vanilla', 'Fran', 'BA', 'CA', 'DA', 'EA', 'FA', 'GA', 'HA', 'IA'],
        ['2', 'bar', 'chocolate', 'Bob', 'BB', 'CB', 'DB', 'EB', 'FB', 'GB', 'HB', 'IB'],
        ['3', 'bazz', 'strawberry', 'Cole', 'BC', 'CC', 'DC', 'EC', 'FC', 'GC', 'HC', 'IC'],
      ];
      return (
        <Table
          isBordered
          isResponsive
          columnConfig={columnConfig}
          tableData={tableData}
        />
      );
    }}
  </Story>
</Preview>

## Fixed-Width Columns

<Preview>
  <Story name="Fixed-Width Columns">
    {() => {
      const columnConfig = [
        {name: 'First Column', width: '315'},
        {name: 'Second Column', width: '215'},
        {name: 'Third Column', width: '100'},
      ];
      const tableData = [
        ['1', 'foo', 'vanilla'],
        ['2', 'bar', 'chocolate'],
        ['3', 'bazz', 'strawberry'],
      ];
      return (
        <Table
          isBordered
          isResponsive
          columnConfig={columnConfig}
          tableData={tableData}
          useFixedWidthColumns
        />
      );
    }}
  </Story>
</Preview>

